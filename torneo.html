<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dettagli Torneo - Club Go FVG</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <img src="assets/img/logoHiga.jpg" class="logo" alt="" />
          <span>Torneo Spiller</span>
        </div>
        <nav class="nav">
          <a href="./tornei.html" class="btn btn-ghost small">← Tornei</a>
        </nav>
      </div>
    </header>
<main class="container content">
      <section class="panel">
    <div id="content" style="max-width: 800px; margin: 50px auto; padding: 20px;">
        Caricamento in corso...
    </div>
    <div class="note muted small">
            <p>
              <strong>Nota privacy:</strong> i dati raccolti servono unicamente
              per la gestione del torneo. Le email non saranno pubblicate.
            </p>
            <p>
              <strong>Privacy notice:</strong> the data collected will be used
              solely for the purpose of managing the tournament. Emails will not
              be published.
            </p>
    <p>
              <a
                class="btn btn-primary"
                href="https://docs.google.com/forms/d/e/1FAIpQLSfOYqsyAC21GwqDR0fo_cdeFjIxt1JLdDUR_MUKD2H-2UwfeA/viewform?usp=publish-editor"
                target="_blank"
                >Iscriviti / Register</a
              >
            </p>
          </div>
      </section>
      <section class="panel">
        <h2>Pre-iscritti</h2>
        <div class="iscritti-grid" id="iscritti"></div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p>© 2026 Club Go FVG</p>


        <div class="social">
          <a
            href="https://www.facebook.com/groups/612754198805804/"
            target="_blank"
            aria-label="Facebook"
            ><img src="assets/img/facebook.svg" alt=""
          /></a>
        </div>
      </div>
    </footer>

    <script src="assets/js/sheet-loader.js"></script>
    <script>
      // Sostituisci con il tuo link CSV pubblico dello Sheet
      loadIscritti(
          "https://docs.google.com/spreadsheets/d/e/2PACX-1vSx2MAUCgMesvDznHa6Ehdtgg6cnStrDk0GxEF4YzPCDhrbS2Z_ExwO5r2e4eUoGnzemKwFOqdYIslC/pub?gid=225215768&single=true&output=csv", "#iscritti"
      );
    </script>

    <script>
        const params = new URLSearchParams(window.location.search);
        const fileName = params.get('f');

        if (fileName) {
            // Usiamo un percorso relativo che parte dalla root
            // Assicurati che il file md sia dentro la cartella /tornei/
            fetch(`../tornei/${fileName}.md`)
                .then(response => {
                    if (!response.ok) throw new Error("File non trovato");
                    return response.text();
                })
                .then(text => {
                    document.getElementById('content').innerHTML = marked.parse(text);
                    document.title = fileName.replace(/-/g, ' ') + " - Club Go FVG";
                })
                .catch(err => {
                    document.getElementById('content').innerHTML = `<h1>Errore 404</h1><p>Il torneo <strong>${fileName}</strong> non è stato trovato nella cartella /tornei/.</p><a href="index.html">Torna alla Home</a>`;
                });
        } else {
            document.getElementById('content').innerHTML = "Specificare un torneo nell'URL.";
        }
    </script>
</body>
</html>
